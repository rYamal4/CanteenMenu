<div class="row">
    <div class="col-md-12">
        <h1>–ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π</h1>
        <hr>
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        <a href="/dishes/add" class="btn btn-success">+ –î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</a>
    </div>
    <div class="col-md-6">
        <form method="GET" action="/dishes" class="d-flex">
            <select name="category_id" class="form-select me-2" onchange="this.form.submit()">
                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                {{#each categories}}
                    <option value="{{this.id}}" {{#if (eq this.id ../selectedCategory)}}selected{{/if}}>
                        {{this.name}}
                    </option>
                {{/each}}
            </select>
            {{#if selectedCategory}}
                <a href="/dishes" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</a>
            {{/if}}
        </form>
    </div>
</div>

{{#if dishes.length}}
<div class="row">
    {{#each dishes}}
    <div class="col-md-4 mb-3">
        <div class="card h-100">
            {{#if this.image_url}}
                <img src="{{this.image_url}}" class="card-img-top" alt="{{this.name}}">
            {{else}}
                <div class="dish-image-placeholder">üçΩÔ∏è</div>
            {{/if}}
            <div class="card-body">
                <h5 class="card-title">{{this.name}}</h5>
                <h6 class="card-subtitle mb-2 text-muted">{{this.category_name}}</h6>
                {{#if this.description}}
                <p class="card-text">{{this.description}}</p>
                {{/if}}
                <p class="card-text">
                    <strong>–¶–µ–Ω–∞:</strong> {{this.price}} —Ä—É–±.<br>
                    {{#if this.weight}}
                    <strong>–í–µ—Å:</strong> {{this.weight}} –≥<br>
                    {{/if}}
                    <strong>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:</strong>
                    {{#if this.is_available}}
                        <span class="badge bg-success">–î–æ—Å—Ç—É–ø–Ω–æ</span>
                    {{else}}
                        <span class="badge bg-danger">–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</span>
                    {{/if}}
                </p>
            </div>
            <div class="card-footer">
                <a href="/dishes/{{this.id}}/details" class="btn btn-sm btn-info">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                <a href="/dishes/{{this.id}}/edit" class="btn btn-sm btn-warning">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <form method="POST" action="/dishes/{{this.id}}/delete" style="display:inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –±–ª—é–¥–æ?');">
                    <button type="submit" class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </div>
        </div>
    </div>
    {{/each}}
</div>
{{else}}
<div class="alert alert-info">
    –ë–ª—é–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
    {{#if selectedCategory}}
        –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–ª–∏ <a href="/dishes">–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –±–ª—é–¥–∞</a>.
    {{else}}
        <a href="/dishes/add">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –±–ª—é–¥–æ</a>.
    {{/if}}
</div>
{{/if}}
